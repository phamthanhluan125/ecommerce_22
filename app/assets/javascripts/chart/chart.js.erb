$(window).load(function(){
  value = $('#Choose_Type option:selected').val();
  ajax(value);
});

$('#Choose_Type').change(function(){
  var value = $('#Choose_Type option:selected').val();
  ajax(value);
});

function ajax(value){
  $.ajax({
    type: 'PUT',
    url : '/admin/admins/' + value,
    dataType: 'json',
    context: this,
    data: {
      chart: {
        value: value
      }
    },
    success: function(response) {
      var data = response.data;
      var label = response.label;
      $(function () {
        Highcharts.setOptions({
          colors: ['#ffa500', '#987cec', '#84c52c', '#e8ea4c', '#24CBE5',
           '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
        });

        Highcharts.chart('container', {

          title: {
            text: 'Chart Development'
          },

          subtitle: {
            text: '<%= I18n.t("name_website").upcase %>'
          },

          yAxis: {
            title: {
              text: 'Number of Items'
            }
          },
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
          },

          xAxis: {
            categories: label
          },

          series: [{
            name: data[0].name,
            data: data[0].data
          }, {
            name: data[1].name,
            data: data[1].data
          }, {
            name: data[2].name,
            data: data[2].data
          }, {
            name: data[3].name,
            data: data[3].data
          }]

        });
      });
    },
    error: function(errors) {
      alert('<%= I18n.t("voicher_not_exist") %>');
    }
  });
}
